(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

/**
 * Main JS
 * 
 */
(function ($, window, document) {
  /**
   *   Fire Immediately 
   */
  $(window).on('load resize scroll', function (e) {
    //  window scroll or load,
    //  i.e., fade in animations
    if (e.type == 'scroll' || e.type == 'load') {
      var elements = $('.anim__fade');

      for (var i = 0; i < elements.length; i++) {
        var element = elements[i];

        if ($(window).scrollTop() + $(window).height() > $(element).offset().top + 100) {
          $(element).removeClass('anim__fade-up anim__fade-in anim__fade-left anim__fade-right');
        }
      }

      if ($('header.header.fadein').length) {
        if ($(window).scrollTop() >= $('header.header').innerHeight()) {
          $('header.header').addClass('bg__fade-in');
        } else {
          $('header.header').removeClass('bg__fade-in');
        }
      }
    } // window resize


    if (e.type == 'resize') {
      if ($('header .container.mobilenav-opened').length) {
        $('header .container.mobilenav-opened').removeClass('mobilenav-opened');
      }
    } // handle 


    if (e.type == 'scroll') {}
  });
  /**
   *   jQuery Document Ready
   */

  $(function () {
    // remove the no-js class from <html>
    $('html').removeClass('no-js'); // offset <main> by <header> height
    // if( $('body:not(.header-fadein)').length ){
    //     $('body:not(.header-fadein) main').css('margin-top', $('header').innerHeight());
    // }
    // mobile nav

    if ($('header .navicons').length) {
      $('header').on('click', '.navicons', function (e) {
        $(this).parents('.container').toggleClass('mobilenav-opened');
      });
      $('header').on('click', '.navlinks', function (e) {
        // check the mobile nav is open
        if ($('header .container.mobilenav-opened').length && $('header .navlinks').css('position') == 'fixed') {
          if (!$(e.target).closest('.navlinks > ul').length) {
            $('header .container').removeClass('mobilenav-opened');
          }
        }
      });
    }
    /**
     * Client Spotlight Banner (Home Page)
     */


    if ($('.client_spotlight-banner > ul').length) {
      $('.client_spotlight-banner > ul').slick({
        autoplay: true,
        autoplaySpeed: 4000,
        slidesToShow: 5,
        centerMode: true,
        centerPadding: 0,
        arrows: false
      });
    } // if there are clients on the page


    if ($('.block__content_grid ul.clients').length) {
      $('.page-clients .block__content_grid .filters').on('click', 'a', function (e) {
        $(this).siblings().removeClass('active');
        $(this).addClass('active');
        var filterClass = $(this).attr('data-term');
        var isReset = $(this).attr('data-term') == 'all';

        if (isReset) {
          window.location.hash = '';
        }

        $('.block__content_grid ul.clients').slick('slickUnfilter');
        $('.block__content_grid ul.clients').slick('slickFilter', function (i, e) {
          return !isReset ? $(this).hasClass(filterClass) : 'slick-slide';
        });
      });
      $('.block__content_grid ul.clients').slick({
        slidesToShow: 3,
        arrows: false,
        centerMode: true,
        centerPadding: 0,
        autoplay: true,
        autoplaySpeed: 4000,
        responsive: [{
          breakpoint: 1280,
          settings: {
            slidesToShow: 2
          }
        }, {
          breakpoint: 960,
          settings: {
            slidesToShow: 1,
            centerMode: false
          }
        }]
      });

      if (window.location.hash) {
        setTimeout(function () {
          $('.page-clients .block__content_grid .filters > a').removeClass('active');
          $('.page-clients .block__content_grid .filters > a[data-term="' + window.location.href.split('#')[1] + '"]').addClass('active');
          $('.block__content_grid ul.clients').slick('slickUnfilter');
          $('.block__content_grid ul.clients').slick('slickFilter', function (i, e) {
            if ($(this).hasClass(window.location.href.split('#')[1])) {
              return true;
            }
          });
          $('.block__content_grid ul.clients').slick('refresh');
        }, 250);
      }
    } // if there are bio popups on the page


    if ($('.js__popup_bio').length) {
      // open the bio popup on click
      $('.js__popup_bio').magnificPopup({
        type: "ajax",
        closeMarkup: '<button title="Close lightbox (Esc)" aria-label="Close lightbox (Esc)" type="button" class="mfp-close">&#215;</button>',
        closeOnContentClick: false,
        closeOnBgClick: true,
        mainClass: 'bio'
      });
    }
  });
})(window.jQuery, window, document);

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJfX3ByZS9fanMvbWFpbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0FDQUE7Ozs7QUFLQyxXQUFVLENBQVYsRUFBYSxNQUFiLEVBQXFCLFFBQXJCLEVBQStCO0FBRTVCOzs7QUFHQSxFQUFBLENBQUMsQ0FBQyxNQUFELENBQUQsQ0FBVSxFQUFWLENBQWEsb0JBQWIsRUFBbUMsVUFBVSxDQUFWLEVBQWE7QUFHNUM7QUFDQTtBQUNBLFFBQUksQ0FBQyxDQUFDLElBQUYsSUFBVSxRQUFWLElBQXNCLENBQUMsQ0FBQyxJQUFGLElBQVUsTUFBcEMsRUFBNEM7QUFDeEMsVUFBSSxRQUFRLEdBQUcsQ0FBQyxDQUFDLGFBQUQsQ0FBaEI7O0FBQ0EsV0FBSyxJQUFJLENBQUMsR0FBRyxDQUFiLEVBQWdCLENBQUMsR0FBRyxRQUFRLENBQUMsTUFBN0IsRUFBcUMsQ0FBQyxFQUF0QyxFQUEwQztBQUN0QyxZQUFNLE9BQU8sR0FBRyxRQUFRLENBQUMsQ0FBRCxDQUF4Qjs7QUFDQSxZQUFJLENBQUMsQ0FBQyxNQUFELENBQUQsQ0FBVSxTQUFWLEtBQXdCLENBQUMsQ0FBQyxNQUFELENBQUQsQ0FBVSxNQUFWLEVBQXhCLEdBQThDLENBQUMsQ0FBQyxPQUFELENBQUQsQ0FBVyxNQUFYLEdBQW9CLEdBQXBCLEdBQTBCLEdBQTVFLEVBQWtGO0FBQzlFLFVBQUEsQ0FBQyxDQUFDLE9BQUQsQ0FBRCxDQUFXLFdBQVgsQ0FBdUIsOERBQXZCO0FBQ0g7QUFDSjs7QUFFRCxVQUFJLENBQUMsQ0FBQyxzQkFBRCxDQUFELENBQTBCLE1BQTlCLEVBQXNDO0FBQ2xDLFlBQUksQ0FBQyxDQUFDLE1BQUQsQ0FBRCxDQUFVLFNBQVYsTUFBeUIsQ0FBQyxDQUFDLGVBQUQsQ0FBRCxDQUFtQixXQUFuQixFQUE3QixFQUErRDtBQUMzRCxVQUFBLENBQUMsQ0FBQyxlQUFELENBQUQsQ0FBbUIsUUFBbkIsQ0FB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QUEyQixHQUEzQixFQUFnQyxDQUFoQyxDQUE5RCxHQUFpRyxJQUFsRyxDQUFELENBQXlHLFFBQXpHLENBQWtILFFBQWxIO0FBQ0EsVUFBQSxDQUFDLENBQUMsaUNBQUQsQ0FBRCxDQUFxQyxLQUFyQyxDQUEyQyxlQUEzQztBQUNBLFVBQUEsQ0FBQyxDQUFDLGlDQUFELENBQUQsQ0FBcUMsS0FBckMsQ0FBMkMsYUFBM0MsRUFBMEQsVUFBVSxDQUFWLEVBQWEsQ0FBYixFQUFnQjtBQUN0RSxnQkFBSSxDQUFDLENBQUMsSUFBRCxDQUFELENBQVEsUUFBUixDQUFpQixNQUFNLENBQUMsUUFBUCxDQUFnQixJQUFoQixDQUFxQixLQUFyQixDQUEyQixHQUEzQixFQUFnQyxDQUFoQyxDQUFqQixDQUFKLEVBQXlEO0FBQ3JELHFCQUFPLElBQVA7QUFDSDtBQUNKLFdBSkQ7QUFLQSxVQUFBLENBQUMsQ0FBQyxpQ0FBRCxDQUFELENBQXFDLEtBQXJDLENBQTJDLFNBQTNDO0FBQ0gsU0FWUyxFQVVQLEdBVk8sQ0FBVjtBQVdIO0FBQ0osS0E1R1MsQ0ErR1Y7OztBQUNBLFFBQUksQ0FBQyxDQUFDLGdCQUFELENBQUQsQ0FBb0IsTUFBeEIsRUFBZ0M7QUFDNUI7QUFDQSxNQUFBLENBQUMsQ0FBQyxnQkFBRCxDQUFELENBQW9CLGFBQXBCLENBQWtDO0FBQzlCLFFBQUEsSUFBSSxFQUFFLE1BRHdCO0FBRTlCLFFBQUEsV0FBVyxFQUFFLHdIQUZpQjtBQUc5QixRQUFBLG1CQUFtQixFQUFFLEtBSFM7QUFJOUIsUUFBQSxjQUFjLEVBQUUsSUFKYztBQUs5QixRQUFBLFNBQVMsRUFBRTtBQUxtQixPQUFsQztBQU9IO0FBSUosR0E3SEEsQ0FBRDtBQStISCxDQTFLQSxFQTBLQyxNQUFNLENBQUMsTUExS1IsRUEwS2dCLE1BMUtoQixFQTBLd0IsUUExS3hCLENBQUQiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCIvKipcclxuICogTWFpbiBKU1xyXG4gKiBcclxuICovXHJcblxyXG4oZnVuY3Rpb24gKCQsIHdpbmRvdywgZG9jdW1lbnQpIHtcclxuXHJcbiAgICAvKipcclxuICAgICAqICAgRmlyZSBJbW1lZGlhdGVseSBcclxuICAgICAqL1xyXG4gICAgJCh3aW5kb3cpLm9uKCdsb2FkIHJlc2l6ZSBzY3JvbGwnLCBmdW5jdGlvbiAoZSkge1xyXG5cclxuXHJcbiAgICAgICAgLy8gIHdpbmRvdyBzY3JvbGwgb3IgbG9hZCxcclxuICAgICAgICAvLyAgaS5lLiwgZmFkZSBpbiBhbmltYXRpb25zXHJcbiAgICAgICAgaWYgKGUudHlwZSA9PSAnc2Nyb2xsJyB8fCBlLnR5cGUgPT0gJ2xvYWQnKSB7XHJcbiAgICAgICAgICAgIGxldCBlbGVtZW50cyA9ICQoJy5hbmltX19mYWRlJyk7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSBlbGVtZW50c1tpXTtcclxuICAgICAgICAgICAgICAgIGlmICgkKHdpbmRvdykuc2Nyb2xsVG9wKCkgKyAkKHdpbmRvdykuaGVpZ2h0KCkgPiAoJChlbGVtZW50KS5vZmZzZXQoKS50b3AgKyAxMDApKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJChlbGVtZW50KS5yZW1vdmVDbGFzcygnYW5pbV9fZmFkZS11cCBhbmltX19mYWRlLWluIGFuaW1fX2ZhZGUtbGVmdCBhbmltX19mYWRlLXJpZ2h0Jyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICgkKCdoZWFkZXIuaGVhZGVyLmZhZGVpbicpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCQod2luZG93KS5zY3JvbGxUb3AoKSA+PSAkKCdoZWFkZXIuaGVhZGVyJykuaW5uZXJIZWlnaHQoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJ2hlYWRlci5oZWFkZXInKS5hZGRDbGFzcygnYmdfX2ZhZGUtaW4nKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnaGVhZGVyLmhlYWRlcicpLnJlbW92ZUNsYXNzKCdiZ19fZmFkZS1pbicpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gd2luZG93IHJlc2l6ZVxyXG4gICAgICAgIGlmIChlLnR5cGUgPT0gJ3Jlc2l6ZScpIHtcclxuICAgICAgICAgICAgaWYgKCQoJ2hlYWRlciAuY29udGFpbmVyLm1vYmlsZW5hdi1vcGVuZWQnKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICQoJ2hlYWRlciAuY29udGFpbmVyLm1vYmlsZW5hdi1vcGVuZWQnKS5yZW1vdmVDbGFzcygnbW9iaWxlbmF2LW9wZW5lZCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGhhbmRsZSBcclxuICAgICAgICBpZiAoZS50eXBlID09ICdzY3JvbGwnKSB7fVxyXG4gICAgfSk7XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogICBqUXVlcnkgRG9jdW1lbnQgUmVhZHlcclxuICAgICAqL1xyXG4gICAgJChmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgIC8vIHJlbW92ZSB0aGUgbm8tanMgY2xhc3MgZnJvbSA8aHRtbD5cclxuICAgICAgICAkKCdodG1sJykucmVtb3ZlQ2xhc3MoJ25vLWpzJyk7XHJcblxyXG5cclxuXHJcbiAgICAgICAgLy8gb2Zmc2V0IDxtYWluPiBieSA8aGVhZGVyPiBoZWlnaHRcclxuICAgICAgICAvLyBpZiggJCgnYm9keTpub3QoLmhlYWRlci1mYWRlaW4pJykubGVuZ3RoICl7XHJcbiAgICAgICAgLy8gICAgICQoJ2JvZHk6bm90KC5oZWFkZXItZmFkZWluKSBtYWluJykuY3NzKCdtYXJnaW4tdG9wJywgJCgnaGVhZGVyJykuaW5uZXJIZWlnaHQoKSk7XHJcbiAgICAgICAgLy8gfVxyXG5cclxuXHJcblxyXG4gICAgICAgIC8vIG1vYmlsZSBuYXZcclxuICAgICAgICBpZiAoJCgnaGVhZGVyIC5uYXZpY29ucycpLmxlbmd0aCkge1xyXG5cclxuXHJcbiAgICAgICAgICAgICQoJ2hlYWRlcicpLm9uKCdjbGljaycsICcubmF2aWNvbnMnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcuY29udGFpbmVyJykudG9nZ2xlQ2xhc3MoJ21vYmlsZW5hdi1vcGVuZWQnKVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgICAgICAkKCdoZWFkZXInKS5vbignY2xpY2snLCAnLm5hdmxpbmtzJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgIC8vIGNoZWNrIHRoZSBtb2JpbGUgbmF2IGlzIG9wZW5cclxuICAgICAgICAgICAgICAgIGlmICgkKCdoZWFkZXIgLmNvbnRhaW5lci5tb2JpbGVuYXYtb3BlbmVkJykubGVuZ3RoICYmICQoJ2hlYWRlciAubmF2bGlua3MnKS5jc3MoJ3Bvc2l0aW9uJykgPT0gJ2ZpeGVkJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghJChlLnRhcmdldCkuY2xvc2VzdCgnLm5hdmxpbmtzID4gdWwnKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnaGVhZGVyIC5jb250YWluZXInKS5yZW1vdmVDbGFzcygnbW9iaWxlbmF2LW9wZW5lZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENsaWVudCBTcG90bGlnaHQgQmFubmVyIChIb21lIFBhZ2UpXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgaWYgKCQoJy5jbGllbnRfc3BvdGxpZ2h0LWJhbm5lciA+IHVsJykubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICQoJy5jbGllbnRfc3BvdGxpZ2h0LWJhbm5lciA+IHVsJykuc2xpY2soe1xyXG4gICAgICAgICAgICAgICAgYXV0b3BsYXk6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBhdXRvcGxheVNwZWVkOiA0MDAwLFxyXG4gICAgICAgICAgICAgICAgc2xpZGVzVG9TaG93OiA1LFxyXG4gICAgICAgICAgICAgICAgY2VudGVyTW9kZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGNlbnRlclBhZGRpbmc6IDAsXHJcbiAgICAgICAgICAgICAgICBhcnJvd3M6IGZhbHNlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gaWYgdGhlcmUgYXJlIGNsaWVudHMgb24gdGhlIHBhZ2VcclxuICAgICAgICBpZiAoJCgnLmJsb2NrX19jb250ZW50X2dyaWQgdWwuY2xpZW50cycpLmxlbmd0aCkge1xyXG5cclxuXHJcbiAgICAgICAgICAgICQoJy5wYWdlLWNsaWVudHMgLmJsb2NrX19jb250ZW50X2dyaWQgLmZpbHRlcnMnKS5vbignY2xpY2snLCAnYScsIGZ1bmN0aW9uIChlKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB2YXIgZmlsdGVyQ2xhc3MgPSAkKHRoaXMpLmF0dHIoJ2RhdGEtdGVybScpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB2YXIgaXNSZXNldCA9ICgkKHRoaXMpLmF0dHIoJ2RhdGEtdGVybScpID09ICdhbGwnKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiggaXNSZXNldCApe1xyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gJyc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICQoJy5ibG9ja19fY29udGVudF9ncmlkIHVsLmNsaWVudHMnKS5zbGljaygnc2xpY2tVbmZpbHRlcicpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmJsb2NrX19jb250ZW50X2dyaWQgdWwuY2xpZW50cycpLnNsaWNrKCdzbGlja0ZpbHRlcicsIGZ1bmN0aW9uIChpLCBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFpc1Jlc2V0ID8gJCh0aGlzKS5oYXNDbGFzcyhmaWx0ZXJDbGFzcykgOiAnc2xpY2stc2xpZGUnO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAkKCcuYmxvY2tfX2NvbnRlbnRfZ3JpZCB1bC5jbGllbnRzJykuc2xpY2soe1xyXG4gICAgICAgICAgICAgICAgc2xpZGVzVG9TaG93OiAzLFxyXG4gICAgICAgICAgICAgICAgYXJyb3dzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGNlbnRlck1vZGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBjZW50ZXJQYWRkaW5nOiAwLFxyXG4gICAgICAgICAgICAgICAgYXV0b3BsYXk6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBhdXRvcGxheVNwZWVkOiA0MDAwLFxyXG4gICAgICAgICAgICAgICAgcmVzcG9uc2l2ZTogW3tcclxuICAgICAgICAgICAgICAgICAgICBicmVha3BvaW50OiAxMjgwLFxyXG4gICAgICAgICAgICAgICAgICAgIHNldHRpbmdzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogMixcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LHtcclxuICAgICAgICAgICAgICAgICAgICBicmVha3BvaW50OiA5NjAsXHJcbiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3M6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVzVG9TaG93OiAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjZW50ZXJNb2RlOiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1dLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZih3aW5kb3cubG9jYXRpb24uaGFzaCl7ICAgXHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcucGFnZS1jbGllbnRzIC5ibG9ja19fY29udGVudF9ncmlkIC5maWx0ZXJzID4gYScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcucGFnZS1jbGllbnRzIC5ibG9ja19fY29udGVudF9ncmlkIC5maWx0ZXJzID4gYVtkYXRhLXRlcm09XCInK3dpbmRvdy5sb2NhdGlvbi5ocmVmLnNwbGl0KCcjJylbMV0rJ1wiXScpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuYmxvY2tfX2NvbnRlbnRfZ3JpZCB1bC5jbGllbnRzJykuc2xpY2soJ3NsaWNrVW5maWx0ZXInKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuYmxvY2tfX2NvbnRlbnRfZ3JpZCB1bC5jbGllbnRzJykuc2xpY2soJ3NsaWNrRmlsdGVyJywgZnVuY3Rpb24gKGksIGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCQodGhpcykuaGFzQ2xhc3Mod2luZG93LmxvY2F0aW9uLmhyZWYuc3BsaXQoJyMnKVsxXSkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuYmxvY2tfX2NvbnRlbnRfZ3JpZCB1bC5jbGllbnRzJykuc2xpY2soJ3JlZnJlc2gnKTtcclxuICAgICAgICAgICAgICAgIH0sIDI1MCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcblxyXG4gICAgICAgIC8vIGlmIHRoZXJlIGFyZSBiaW8gcG9wdXBzIG9uIHRoZSBwYWdlXHJcbiAgICAgICAgaWYgKCQoJy5qc19fcG9wdXBfYmlvJykubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIC8vIG9wZW4gdGhlIGJpbyBwb3B1cCBvbiBjbGlja1xyXG4gICAgICAgICAgICAkKCcuanNfX3BvcHVwX2JpbycpLm1hZ25pZmljUG9wdXAoe1xyXG4gICAgICAgICAgICAgICAgdHlwZTogXCJhamF4XCIsXHJcbiAgICAgICAgICAgICAgICBjbG9zZU1hcmt1cDogJzxidXR0b24gdGl0bGU9XCJDbG9zZSBsaWdodGJveCAoRXNjKVwiIGFyaWEtbGFiZWw9XCJDbG9zZSBsaWdodGJveCAoRXNjKVwiIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cIm1mcC1jbG9zZVwiPiYjMjE1OzwvYnV0dG9uPicsXHJcbiAgICAgICAgICAgICAgICBjbG9zZU9uQ29udGVudENsaWNrOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGNsb3NlT25CZ0NsaWNrOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgbWFpbkNsYXNzOiAnYmlvJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG5cclxuXHJcbiAgICB9KTtcclxuXHJcbn0od2luZG93LmpRdWVyeSwgd2luZG93LCBkb2N1bWVudCkpOyJdfQ==
